## VonCMS Universal .htaccess
# Works on root OR any subfolder without editing!

<IfModule mod_rewrite.c>
  RewriteEngine On
  
  # Auto-detect base path (no manual RewriteBase needed!)
  RewriteCond %{REQUEST_URI}::$1 ^(/.+)/(.*)::\2$
  RewriteRule ^(.*) - [E=BASE:%1]
  
  # Serve existing files directly
  RewriteCond %{REQUEST_FILENAME} -f
  RewriteRule ^ - [L]
  
  # Serve existing directories directly  
  RewriteCond %{REQUEST_FILENAME} -d
  RewriteRule ^ - [L]
  
  # Keep PHP endpoints accessible
  RewriteRule ^(save_settings\.php|api\.php|index\.php)$ $1 [L]
  
  # Handle API requests
  RewriteRule ^api/(.*)$ api/$1 [L]
  
  # Fallback to index.php for SPA routing
  RewriteRule ^ index.php [L,QSA]
</IfModule>

# Security - block hidden files
<FilesMatch "^\.">
  Require all denied
</FilesMatch>

# Proper MIME types for assets
<IfModule mod_mime.c>
  AddType application/javascript .js
  AddType text/css .css
</IfModule>

